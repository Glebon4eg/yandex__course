## Проверка системы

<details>
  <summary>Условие</summary>
  В локальной сети тестирующей системы работает сервер 127.0.0.1. Он слушает порт 5000 и иногда отвечает на него.

  Обратитесь к серверу и выведите сообщение, полученное от него.
  
  ### Примечания
  - Во всех задачах данной главы используется протокол http
  - Не забудьте, что ответ сервера является бинарным объектом и его следует декодировать.


</details>

<details>
  <summary>Решение</summary>

  ```python
  from requests import get

  response = get("http://127.0.0.1:5000")
  print(response.text)
  ```

</details>

## Суммирование ответов

<details>
  <summary>Условие</summary>
  Напишите программу, которая суммирует данные, передаваемые с сервера.

  Если сервер передал число 0, значит, данные закончились и он перезапустит выдачу ответов.
  
  ### Формат ввода
  Вводится адрес сервера.
  
  ### Формат вывода
  Одно число — сумма всех данных, полученных с сервера.


</details>

<details>
  <summary>Решение</summary>

  ```python
  from requests import get

  url = input()
  
  total = 0
  data = get(f'http://{url}')
  while data.text != "0":
      total += int(data.text)
      data = get(f'http://{url}')
  print(total)

  ```

</details>

## Суммирование ответов 2

<details>
  <summary>Условие</summary>
  Сервер отвечает на запрос JSON списком.
  Выведите сумму чисел в полученном списке.
  
  ### Формат ввода
  Вводится адрес сервера
  
  ### Формат вывода
  Одно число — сумма всех чисел в полученном списке.


</details>

<details>
  <summary>Решение</summary>

  ```python
  from requests import get

  url = input()
  
  total = 0
  data_get = get(f'http://{url}')
  for data in data_get.json():
      if isinstance(data, int):
          total += data
  print(total)

  ```

</details>

## Конкретное значение

<details>
  <summary>Условие</summary>
  Сервер отвечает на запрос JSON объект. 
  Выведите значение, находящееся в объекте по заданному ключу. 
  Если такое значение не обнаружено, то выведите сообщение «No data».
  
  ### Формат ввода
  В первой строке вводится адрес сервера. Во второй строке — имя ключа.
  
  ### Формат вывода
  Одна строка — значение, полученное по заданному ключу, или сообщение «No data».


</details>

<details>
  <summary>Решение</summary>

  ```python
  from requests import get

  url = input()
  
  need_to_find = input()
  
  data = get(f'http://{url}').json()
  
  print(data.get(need_to_find, "No data"))

  ```

</details>

## Суммирование ответов 3

<details>
  <summary>Условие</summary>
  Сервер отвечает на несколько путей, каждый из которых возвращает свой JSON список. Напишите программу, которая произведёт сбор и суммирование всех данных по заданным путям.

  ### Формат ввода
  Вводится адрес сервера и список анализируемых путей.
  
  ### Формат вывода
  Одно число — сумма всех чисел из полученных списков.


</details>

<details>
  <summary>Решение</summary>

  ```python
  from requests import get
  from sys import stdin
  
  url = input()
  
  need_to_get = []
  
  for line in stdin:
      need_to_get.append(line.rstrip("\n"))
  
  total = 0
  
  for add_to_url in need_to_get:
      for data in get(f'http://{url}{add_to_url}').json():
          total += data
  
  print(total)
  ```

</details>

## Список пользователей

<details>
  <summary>Условие</summary>
  На сервере по пути /users, доступен список пользователей, представленных JSON объектами с ключами:

  - id — уникальный идентификатор пользователя;
  - username — имя пользователя;
  - last_name — фамилия;
  - first_name — имя;
  - email — адрес электронной почты.
  
  ### Формат ввода
  В первой строке вводится адрес сервера.
  
  ### Формат вывода
  Выведите список всех пользователей системы в алфавитном порядке.


</details>

<details>
  <summary>Решение</summary>

  ```python
  from requests import get

  url = input()
  
  data = get(f'http://{url}/users').json()
  name_and_surname = []
  
  for info in data:
      name_and_surname.append(f'{info["last_name"]} {info["first_name"]}')
  
  for x in sorted(name_and_surname):
      print(x)


  ```

</details>

## Рассылка сообщений

<details>
  <summary>Условие</summary>
  Продолжим работу с сервером из прошлой задачи. По пути /users/<id> доступен JSON объект пользователя с заданным id.

  Подготовьте текст письма для отправки важной рассылки.
  
  Если пользователь с заданным идентификатором не найден, выведите сообщение «Пользователь не найден».
  
  ### Формат ввода
  В первой строке вводится адрес сервера. 
  Во второй строке вводится id пользователя, которому требуется отправить письмо. 
  В последующих строках записано содержание сообщения с форматированными вставками любого из полей объекта.
  
  ### Формат вывода
  Выведите подготовленное сообщение.


</details>

<details>
  <summary>Решение</summary>

  ```python
  from requests import get

  from sys import stdin
  
  url = input()
  id = input()
  data = get(f'http://{url}/users/{id}')
  
  if data.status_code == 404:
      print("Пользователь не найден")
  else:
      data = data.json()
      lines = []
      for line in stdin:
          lines.append(line.rstrip("\n"))
  
      for i in range(len(lines)):
          for info in data:
              if info in lines[i]:
                  lines[i] = lines[i].replace('{' + info + '}', str(data[info]))
  
      for line in lines:
          print(line)
  ```

</details>

## Регистрация нового пользователя

<details>
  <summary>Условие</summary>
  Продолжим работу с сервером из прошлых задач. При POST запросе по пути /users доступна возможность создания новых пользователей. Для этого в данные запроса (data) требуется передать JSON объект с информацией о пользователе (без указания идентификатора).

  Напишите программу, которая добавляет нового пользователя в систему.
  
  ### Формат ввода
  В первой строке вводится адрес сервера. 
  В следующих строках вводятся: имя пользователя, фамилия, имя и адрес электронной почты.
  
  ### Формат вывода
  Ничего выводить не требуется.


</details>

<details>
  <summary>Решение</summary>

  ```python
  import json
  import requests
  
  url = input()
  
  data = {"username": input(), "last_name": input(), "first_name": input(), "email": input()}
  
  requests.post(f'http://{url}/users', data=json.dumps(data))
  ```

</details>

## Изменение данных

<details>
  <summary>Условие</summary>
  Продолжим работу с сервером из прошлых задач. При PUT запросе по пути /users/<id> доступна возможность изменение информации о пользователе. Для этого в данные запроса (data) требуется передать JSON объект с новой информацией (без указания идентификатора).

  Напишите программу, которая изменяет информацию о пользователе.
  
  ### Формат ввода
  В первой строке вводится адрес сервера. 
  Во второй строке записан идентификатор пользователя, информацию о котором требуется изменить. В следующих строках вводятся данные для изменения в формате: <название поля>=<новое значение>.
  
  ### Формат вывода
  Ничего выводить не требуется.


</details>

<details>
  <summary>Решение</summary>

  ```python
  from requests import put
  from json import dumps
  from sys import stdin
  
  url = input()
  id = input()
  address = f'http://{url}/users/{id}'
  line = [i.strip().split('=') for i in stdin]
  data_to_dump = {}
  for data in line:
      data_to_dump[data[0]] = data[1]
  put(address, data=dumps(data_to_dump))
  ```

</details>

## Удаление данных

<details>
  <summary>Условие</summary>
  Завершим эпопею с сервером из прошлых задач. При DELETE запросе по пути /users/<id> производится удаление пользователя с заданным идентификатором.

  Напишите программу, которая удаляет пользователя из системы.
  
  ### Формат ввода
  В первой строке вводится адрес сервера. 
  Во второй строке записан идентификатор пользователя, информацию о котором требуется удалить.
  
  ### Формат вывода
  Ничего выводить не требуется.
  

</details>

<details>
  <summary>Решение</summary>

  ```python
  from requests import delete

  url = input()
  id = input()
  
  delete(f'http://{url}/users/{id}')
  ```

</details>
